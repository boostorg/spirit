<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<title>Rule</title>
<link rel="stylesheet" href="../../../../../../../../doc/html/boostbook.css" type="text/css">
<meta name="generator" content="DocBook XSL Stylesheets V1.65.1">
<link rel="home" href="../../../../index.html" title="Spirit 2.1">
<link rel="up" href="../nonterminal.html" title="Nonterminal">
<link rel="previous" href="../nonterminal.html" title="Nonterminal">
<link rel="next" href="grammar.html" title="Grammar">
</head>
<body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF">
<table cellpadding="2" width="100%"><tr>
<td valign="top"><img alt="Boost C++ Libraries" width="277" height="86" src="../../../../../../../../boost.png"></td>
<td align="center"><a href="../../../../../../../../index.html">Home</a></td>
<td align="center"><a href="../../../../../../../libraries.htm">Libraries</a></td>
<td align="center"><a href="http://www.boost.org/users/people.html">People</a></td>
<td align="center"><a href="http://www.boost.org/users/faq.html">FAQ</a></td>
<td align="center"><a href="../../../../../../../../more/index.htm">More</a></td>
</tr></table>
<hr>
<div class="spirit-nav">
<a accesskey="p" href="../nonterminal.html"><img src="../../../../../../../../doc/html/images/prev.png" alt="Prev"></a><a accesskey="u" href="../nonterminal.html"><img src="../../../../../../../../doc/html/images/up.png" alt="Up"></a><a accesskey="h" href="../../../../index.html"><img src="../../../../../../../../doc/html/images/home.png" alt="Home"></a><a accesskey="n" href="grammar.html"><img src="../../../../../../../../doc/html/images/next.png" alt="Next"></a>
</div>
<div class="section" lang="en">
<div class="titlepage">
<div><div><h5 class="title">
<a name="spirit.karma.reference.nonterminal.rule"></a><a href="rule.html" title="Rule">Rule</a>
</h5></div></div>
<div></div>
</div>
<a name="spirit.karma.reference.nonterminal.rule.description"></a><h6>
<a name="id654648"></a>
            <a href="rule.html#spirit.karma.reference.nonterminal.rule.description">Description</a>
          </h6>
<p>
            The rule is a polymorphic generator that acts as a named place-holder
            capturing the behavior of an PEG expression assigned to it. Naming a
            <a href="../../../abstracts/parsing_expression_grammar.html" title="Parsing
      Expression Grammar">Parsing Expression
            Grammar</a> expression allows it to be referenced later and makes
            it possible for the rule to call itself. This is one of the most important
            mechanisms and the reason behind the word "recursive" in recursive
            descent output generation.
          </p>
<a name="spirit.karma.reference.nonterminal.rule.header"></a><h6>
<a name="id654693"></a>
            <a href="rule.html#spirit.karma.reference.nonterminal.rule.header">Header</a>
          </h6>
<pre class="programlisting"><span class="comment">// forwards to &lt;boost/spirit/karma/nonterminal/rule.hpp&gt;
</span><span class="preprocessor">#include</span> <span class="special">&lt;</span><span class="identifier">boost</span><span class="special">/</span><span class="identifier">spirit</span><span class="special">/</span><span class="identifier">include</span><span class="special">/</span><span class="identifier">karma_rule</span><span class="special">.</span><span class="identifier">hpp</span><span class="special">&gt;</span>
</pre>
<p>
            Also, see <a href="../../../structure/include.html" title="Include">Include Structure</a>.
          </p>
<a name="spirit.karma.reference.nonterminal.rule.namespace"></a><h6>
<a name="id654806"></a>
            <a href="rule.html#spirit.karma.reference.nonterminal.rule.namespace">Namespace</a>
          </h6>
<div class="informaltable"><table class="table">
<colgroup><col></colgroup>
<thead><tr><th><p>
                    Name
                  </p></th></tr></thead>
<tbody><tr><td><p>
                    <tt class="computeroutput"><span class="identifier">boost</span><span class="special">::</span><span class="identifier">spirit</span><span class="special">::</span><span class="identifier">karma</span><span class="special">::</span><span class="identifier">rule</span></tt>
                  </p></td></tr></tbody>
</table></div>
<a name="spirit.karma.reference.nonterminal.rule.synopsis"></a><h6>
<a name="id654913"></a>
            <a href="rule.html#spirit.karma.reference.nonterminal.rule.synopsis">Synopsis</a>
          </h6>
<pre class="programlisting"><span class="keyword">template</span> <span class="special">&lt;</span><span class="keyword">typename</span> <span class="identifier">OutputIterator</span><span class="special">,</span> <span class="keyword">typename</span> <span class="identifier">A1</span><span class="special">,</span> <span class="keyword">typename</span> <span class="identifier">A2</span><span class="special">,</span> <span class="keyword">typename</span> <span class="identifier">A3</span><span class="special">&gt;</span>
<span class="keyword">struct</span> <span class="identifier">rule</span><span class="special">;</span>
</pre>
<a name="spirit.karma.reference.nonterminal.rule.template_parameters"></a><h6>
<a name="id655043"></a>
            <a href="rule.html#spirit.karma.reference.nonterminal.rule.template_parameters">Template
            parameters</a>
          </h6>
<div class="informaltable"><table class="table">
<colgroup>
<col>
<col>
<col>
</colgroup>
<thead><tr>
<th><p>
                    Parameter
                  </p></th>
<th><p>
                    Description
                  </p></th>
<th><p>
                    Default
                  </p></th>
</tr></thead>
<tbody>
<tr>
<td><p>
                    <tt class="computeroutput"><span class="identifier">OutputIterator</span></tt>
                  </p></td>
<td><p>
                    The underlying output iterator type that the rule is expected
                    to work on.
                  </p></td>
<td><p>
                    none
                  </p></td>
</tr>
<tr>
<td><p>
                    <tt class="computeroutput"><span class="identifier">A1</span></tt>, <tt class="computeroutput"><span class="identifier">A2</span></tt>, <tt class="computeroutput"><span class="identifier">A3</span></tt>
                  </p></td>
<td><p>
                    Either <tt class="computeroutput"><span class="identifier">Signature</span></tt>,
                    <tt class="computeroutput"><span class="identifier">Delimiter</span></tt> or
                    <tt class="computeroutput"><span class="identifier">Locals</span></tt> in any
                    order. See table below.
                  </p></td>
<td><p>
                    See table below.
                  </p></td>
</tr>
</tbody>
</table></div>
<p>
            Here is more information about the template parameters:
          </p>
<div class="informaltable"><table class="table">
<colgroup>
<col>
<col>
<col>
</colgroup>
<thead><tr>
<th><p>
                    Parameter
                  </p></th>
<th><p>
                    Description
                  </p></th>
<th><p>
                    Default
                  </p></th>
</tr></thead>
<tbody>
<tr>
<td><p>
                    <tt class="computeroutput"><span class="identifier">Signature</span></tt>
                  </p></td>
<td><p>
                    Specifies the rule's consumed (value to output) and inherited
                    (arguments) attributes. More on this here: <a href="../generator_concepts/nonterminal.html" title="Nonterminal"><tt class="computeroutput"><span class="identifier">Nonterminal</span></tt></a>.
                  </p></td>
<td><p>
                    <tt class="computeroutput"><span class="identifier">unused_type</span></tt>.
                    When <tt class="computeroutput"><span class="identifier">Signature</span></tt>
                    defaults to <tt class="computeroutput"><span class="identifier">unused_type</span></tt>,
                    the effect is the same as specifying a signature of <tt class="computeroutput"><span class="keyword">void</span><span class="special">()</span></tt>
                    which is also equivalent to <tt class="computeroutput"><span class="identifier">unused</span><span class="special">()</span></tt>
                  </p></td>
</tr>
<tr>
<td><p>
                    <tt class="computeroutput"><span class="identifier">Delimiter</span></tt>
                  </p></td>
<td><p>
                    Specifies the rule's delimiter generator. Specify this if you
                    want the rule to delimit the generated output.
                  </p></td>
<td><p>
                    <tt class="computeroutput"><span class="identifier">unused_type</span></tt>
                  </p></td>
</tr>
<tr>
<td><p>
                    <tt class="computeroutput"><span class="identifier">Locals</span></tt>
                  </p></td>
<td><p>
                    Specifies the rule's local variables. See <a href="../generator_concepts/nonterminal.html" title="Nonterminal"><tt class="computeroutput"><span class="identifier">Nonterminal</span></tt></a>.
                  </p></td>
<td><p>
                    <tt class="computeroutput"><span class="identifier">unused_type</span></tt>
                  </p></td>
</tr>
</tbody>
</table></div>
<a name="spirit.karma.reference.nonterminal.rule.model_of"></a><h6>
<a name="id655538"></a>
            <a href="rule.html#spirit.karma.reference.nonterminal.rule.model_of">Model
            of</a>
          </h6>
<div class="blockquote"><blockquote class="blockquote">
<p>
              </p>
<p>
                <a href="../generator_concepts/nonterminal.html" title="Nonterminal"><tt class="computeroutput"><span class="identifier">Nonterminal</span></tt></a>
              </p>
<p>
            </p>
</blockquote></div>
<a name="spirit.karma.reference.nonterminal.rule.signature"></a><h6>
<a name="id655591"></a>
            <a href="rule.html#spirit.karma.reference.nonterminal.rule.signature">Signature</a>
          </h6>
<div class="variablelist">
<p class="title"><b>Notation</b></p>
<dl>
<dt><span class="term"><tt class="computeroutput"><span class="identifier">r</span><span class="special">,</span> <span class="identifier">r2</span></tt></span></dt>
<dd><p>
                Rules
              </p></dd>
<dt><span class="term"><tt class="computeroutput"><span class="identifier">g</span></tt></span></dt>
<dd><p>
                A generator expression
              </p></dd>
<dt><span class="term"><tt class="computeroutput"><span class="identifier">OutputIterator</span></tt></span></dt>
<dd><p>
                The underlying output iterator type that the rule is expected to
                work on.
              </p></dd>
<dt><span class="term"><tt class="computeroutput"><span class="identifier">A1</span></tt>,
            <tt class="computeroutput"><span class="identifier">A2</span></tt>, <tt class="computeroutput"><span class="identifier">A3</span></tt></span></dt>
<dd><p>
                Either <tt class="computeroutput"><span class="identifier">Signature</span></tt>,
                <tt class="computeroutput"><span class="identifier">Delimiter</span></tt> or <tt class="computeroutput"><span class="identifier">Locals</span></tt> in any order.
              </p></dd>
</dl>
</div>
<a name="spirit.karma.reference.nonterminal.rule.expression_semantics"></a><h6>
<a name="id655786"></a>
            <a href="rule.html#spirit.karma.reference.nonterminal.rule.expression_semantics">Expression
            Semantics</a>
          </h6>
<p>
            Semantics of an expression is defined only where it differs from, or
            is not defined in <a href="../generator_concepts/nonterminal.html" title="Nonterminal"><tt class="computeroutput"><span class="identifier">Nonterminal</span></tt></a>.
          </p>
<div class="informaltable"><table class="table">
<colgroup>
<col>
<col>
</colgroup>
<thead><tr>
<th><p>
                    Expression
                  </p></th>
<th><p>
                    Description
                  </p></th>
</tr></thead>
<tbody>
<tr>
<td>
<p>
                    
</p>
<pre xmlns:rev="http://www.cs.rpi.edu/~gregod/boost/tools/doc/revision" class="table-programlisting"><span class="identifier">rule</span><span class="special">&lt;</span><span class="identifier">OutputIterator</span><span class="special">,</span> <span class="identifier">A1</span><span class="special">,</span> <span class="identifier">A2</span><span class="special">,</span> <span class="identifier">A3</span><span class="special">&gt;</span> 
    <span class="identifier">r</span><span class="special">(</span><span class="identifier">name</span><span class="special">);</span></pre>
<p>
                  </p>
</td>
<td><p>
                    Rule declaration. <tt class="computeroutput"><span class="identifier">OutputIterator</span></tt>
                    is required. <tt class="computeroutput"><span class="identifier">A1</span><span class="special">,</span> <span class="identifier">A2</span><span class="special">,</span> <span class="identifier">A3</span></tt>
                    are optional and can be specified in any order. <tt class="computeroutput"><span class="identifier">name</span></tt> is an optional string
                    that gives the rule its name, useful for debugging.
                  </p></td>
</tr>
<tr>
<td>
<p>
                    
</p>
<pre xmlns:rev="http://www.cs.rpi.edu/~gregod/boost/tools/doc/revision" class="table-programlisting"><span class="identifier">rule</span><span class="special">&lt;</span><span class="identifier">OutputIterator</span><span class="special">,</span> <span class="identifier">A1</span><span class="special">,</span> <span class="identifier">A2</span><span class="special">,</span> <span class="identifier">A3</span><span class="special">&gt;</span> 
    <span class="identifier">r</span><span class="special">(</span><span class="identifier">r2</span><span class="special">);</span></pre>
<p>
                  </p>
</td>
<td><p>
                    Copy construct rule <tt class="computeroutput"><span class="identifier">r</span></tt>
                    from rule <tt class="computeroutput"><span class="identifier">r2</span></tt>.
                  </p></td>
</tr>
<tr>
<td><p>
                    <tt class="computeroutput"><span class="identifier">r</span> <span class="special">=</span>
                    <span class="identifier">r2</span><span class="special">;</span></tt>
                  </p></td>
<td><p>
                    Assign rule <tt class="computeroutput"><span class="identifier">r2</span></tt>
                    to <tt class="computeroutput"><span class="identifier">r</span></tt>.
                  </p></td>
</tr>
<tr>
<td><p>
                    <tt class="computeroutput"><span class="identifier">r</span><span class="special">.</span><span class="identifier">alias</span><span class="special">()</span></tt>
                  </p></td>
<td><p>
                    return an alias of <tt class="computeroutput"><span class="identifier">r</span></tt>.
                    The alias is a generator that holds a reference to <tt class="computeroutput"><span class="identifier">r</span></tt>. Reference semantics.
                  </p></td>
</tr>
<tr>
<td><p>
                    <tt class="computeroutput"><span class="identifier">r</span><span class="special">.</span><span class="identifier">copy</span><span class="special">()</span></tt>
                  </p></td>
<td><p>
                    Get a copy of <tt class="computeroutput"><span class="identifier">r</span></tt>.
                  </p></td>
</tr>
<tr>
<td><p>
                    <tt class="computeroutput"><span class="identifier">r</span> <span class="special">=</span>
                    <span class="identifier">g</span><span class="special">;</span></tt>
                  </p></td>
<td><p>
                    Rule definition
                  </p></td>
</tr>
<tr>
<td><p>
                    <tt class="computeroutput"><span class="identifier">r</span> <span class="special">%=</span>
                    <span class="identifier">g</span><span class="special">;</span></tt>
                  </p></td>
<td><p>
                    Auto-rule definition. The attribute of <tt class="computeroutput"><span class="identifier">expr</span></tt>
                    should be compatible with the consumed attribute of <tt class="computeroutput"><span class="identifier">r</span></tt>.
                  </p></td>
</tr>
</tbody>
</table></div>
<a name="spirit.karma.reference.nonterminal.rule.attributes"></a><h6>
<a name="id656464"></a>
            <a href="rule.html#spirit.karma.reference.nonterminal.rule.attributes">Attributes</a>
          </h6>
<div class="blockquote"><blockquote class="blockquote">
<p>
              </p>
<p>
                The rule's generator attribute is <tt class="computeroutput"><span class="identifier">RT</span></tt>:
                The consumed attribute of the rule. See <a href="../generator_concepts/nonterminal.html#spirit.karma.reference.generator_concepts.nonterminal.attributes"><tt class="computeroutput"><span class="identifier">Attribute</span></tt></a>
              </p>
<p>
            </p>
</blockquote></div>
<a name="spirit.karma.reference.nonterminal.rule.complexity"></a><h6>
<a name="id656533"></a>
            <a href="rule.html#spirit.karma.reference.nonterminal.rule.complexity">Complexity</a>
          </h6>
<div class="blockquote"><blockquote class="blockquote">
<p>
              </p>
<p>
                The complexity is defined by the complexity of the RHS generator,
                <tt class="computeroutput"><span class="identifier">g</span></tt>
              </p>
<p>
            </p>
</blockquote></div>
<a name="spirit.karma.reference.nonterminal.rule.example"></a><h6>
<a name="id656582"></a>
            <a href="rule.html#spirit.karma.reference.nonterminal.rule.example">Example</a>
          </h6>
<div class="note"><table border="0" summary="Note">
<tr>
<td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="../../../../images/note.png"></td>
<th align="left">Note</th>
</tr>
<tr><td colspan="2" align="left" valign="top"><p>
              The test harness for the example(s) below is presented in the <a href="../karma_basics.html#spirit.karma.reference.karma_basics.examples">Basics Examples</a>
              section.
            </p></td></tr>
</table></div>
<p>
            </p>
<p>
              Some using declarations:
            </p>
<p>
            </p>
<p>
              
</p>
<pre class="programlisting"><span class="keyword">using</span> <span class="identifier">boost</span><span class="special">::</span><span class="identifier">spirit</span><span class="special">::</span><span class="identifier">karma</span><span class="special">::</span><span class="identifier">rule</span><span class="special">;</span>
<span class="keyword">using</span> <span class="identifier">boost</span><span class="special">::</span><span class="identifier">spirit</span><span class="special">::</span><span class="identifier">karma</span><span class="special">::</span><span class="identifier">int_</span><span class="special">;</span>
<span class="keyword">using</span> <span class="identifier">boost</span><span class="special">::</span><span class="identifier">spirit</span><span class="special">::</span><span class="identifier">ascii</span><span class="special">::</span><span class="identifier">space</span><span class="special">;</span>
<span class="keyword">using</span> <span class="identifier">boost</span><span class="special">::</span><span class="identifier">spirit</span><span class="special">::</span><span class="identifier">ascii</span><span class="special">::</span><span class="identifier">space_type</span><span class="special">;</span></pre>
<p>
            </p>
<p>
            </p>
<p>
              Basic rule:
            </p>
<p>
            </p>
<p>
              
</p>
<pre class="programlisting"><span class="identifier">rule</span><span class="special">&lt;</span><span class="identifier">output_iterator_type</span><span class="special">&gt;</span> <span class="identifier">r</span><span class="special">;</span>
<span class="identifier">r</span> <span class="special">=</span> <span class="identifier">int_</span><span class="special">(</span><span class="number">123</span><span class="special">);</span>
<span class="identifier">test_generator</span><span class="special">(</span><span class="string">"123"</span><span class="special">,</span> <span class="identifier">r</span><span class="special">);</span></pre>
<p>
            </p>
<p>
            </p>
<p>
              Rule with consumed attribute:
            </p>
<p>
            </p>
<p>
              
</p>
<pre class="programlisting"><span class="identifier">rule</span><span class="special">&lt;</span><span class="identifier">output_iterator_type</span><span class="special">,</span> <span class="keyword">int</span><span class="special">()&gt;</span> <span class="identifier">ra</span><span class="special">;</span>
<span class="identifier">ra</span> <span class="special">=</span> <span class="identifier">int_</span><span class="special">;</span>
<span class="identifier">test_generator_attr</span><span class="special">(</span><span class="string">"123"</span><span class="special">,</span> <span class="identifier">ra</span><span class="special">,</span> <span class="number">123</span><span class="special">);</span></pre>
<p>
            </p>
<p>
            </p>
<p>
              Rule with delimiter and consumed attribute:
            </p>
<p>
            </p>
<p>
              
</p>
<pre class="programlisting"><span class="identifier">rule</span><span class="special">&lt;</span><span class="identifier">output_iterator_type</span><span class="special">,</span> <span class="identifier">std</span><span class="special">::</span><span class="identifier">vector</span><span class="special">&lt;</span><span class="keyword">int</span><span class="special">&gt;(),</span> <span class="identifier">space_type</span><span class="special">&gt;</span> <span class="identifier">rs</span><span class="special">;</span>
<span class="identifier">rs</span> <span class="special">=</span> <span class="special">*</span><span class="identifier">int_</span><span class="special">;</span>
<span class="identifier">std</span><span class="special">::</span><span class="identifier">vector</span><span class="special">&lt;</span><span class="keyword">int</span><span class="special">&gt;</span> <span class="identifier">v</span><span class="special">;</span>
<span class="identifier">v</span><span class="special">.</span><span class="identifier">push_back</span><span class="special">(</span><span class="number">123</span><span class="special">);</span>
<span class="identifier">v</span><span class="special">.</span><span class="identifier">push_back</span><span class="special">(</span><span class="number">456</span><span class="special">);</span>
<span class="identifier">v</span><span class="special">.</span><span class="identifier">push_back</span><span class="special">(</span><span class="number">789</span><span class="special">);</span>
<span class="identifier">test_generator_attr_delim</span><span class="special">(</span><span class="string">"123 456 789"</span><span class="special">,</span> <span class="identifier">rs</span><span class="special">,</span> <span class="identifier">space</span><span class="special">,</span> <span class="identifier">v</span><span class="special">);</span>
</pre>
<p>
            </p>
<p>
          </p>
</div>
<table xmlns:rev="http://www.cs.rpi.edu/~gregod/boost/tools/doc/revision" width="100%"><tr>
<td align="left"></td>
<td align="right"><div class="copyright-footer">Copyright © 2001-2009 Joel
      de Guzman, Hartmut Kaiser<p>
        Distributed under the Boost Software License, Version 1.0. (See accompanying
        file LICENSE_1_0.txt or copy at <a href="http://www.boost.org/LICENSE_1_0.txt" target="_top">http://www.boost.org/LICENSE_1_0.txt</a>)
      </p>
</div></td>
</tr></table>
<hr>
<div class="spirit-nav">
<a accesskey="p" href="../nonterminal.html"><img src="../../../../../../../../doc/html/images/prev.png" alt="Prev"></a><a accesskey="u" href="../nonterminal.html"><img src="../../../../../../../../doc/html/images/up.png" alt="Up"></a><a accesskey="h" href="../../../../index.html"><img src="../../../../../../../../doc/html/images/home.png" alt="Home"></a><a accesskey="n" href="grammar.html"><img src="../../../../../../../../doc/html/images/next.png" alt="Next"></a>
</div>
</body>
</html>
