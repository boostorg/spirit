<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<title> String</title>
<link rel="stylesheet" href="../../../../../../../doc/html/boostbook.css" type="text/css">
<meta name="generator" content="DocBook XSL Stylesheets V1.65.1">
<link rel="home" href="../../../index.html" title="Spirit 2.1">
<link rel="up" href="../reference.html" title="Reference">
<link rel="previous" href="char/char_class.html" title=" Character
          Class Generators">
<link rel="next" href="numeric.html" title=" Numeric">
</head>
<body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF">
<table cellpadding="2" width="100%"><tr>
<td valign="top"><img alt="Boost C++ Libraries" width="277" height="86" src="../../../../../../../boost.png"></td>
<td align="center"><a href="../../../../../../../index.html">Home</a></td>
<td align="center"><a href="../../../../../../libraries.htm">Libraries</a></td>
<td align="center"><a href="http://www.boost.org/users/people.html">People</a></td>
<td align="center"><a href="http://www.boost.org/users/faq.html">FAQ</a></td>
<td align="center"><a href="../../../../../../../more/index.htm">More</a></td>
</tr></table>
<hr>
<div class="spirit-nav">
<a accesskey="p" href="char/char_class.html"><img src="../../../../../../../doc/html/images/prev.png" alt="Prev"></a><a accesskey="u" href="../reference.html"><img src="../../../../../../../doc/html/images/up.png" alt="Up"></a><a accesskey="h" href="../../../index.html"><img src="../../../../../../../doc/html/images/home.png" alt="Home"></a><a accesskey="n" href="numeric.html"><img src="../../../../../../../doc/html/images/next.png" alt="Next"></a>
</div>
<div class="section" lang="en">
<div class="titlepage">
<div><div><h4 class="title">
<a name="spirit.karma.reference.string"></a><a href="string.html" title=" String"> String</a>
</h4></div></div>
<div></div>
</div>
<p>
          This module includes different string oriented generators allowing to output
          character sequences. It includes variants of the <tt class="computeroutput"><span class="identifier">string</span></tt>
          generator.
        </p>
<a name="spirit.karma.reference.string.description"></a><h5>
<a name="id556272"></a>
          <a href="string.html#spirit.karma.reference.string.description">Description</a>
        </h5>
<p>
          The string generators described in this section are:
        </p>
<p>
          The <tt class="computeroutput"><span class="identifier">string</span></tt> generator emits
          a string of characters. The <tt class="computeroutput"><span class="identifier">string</span></tt>
          generator is implicitly verbatim: the <tt class="computeroutput"><span class="identifier">delimit</span></tt>
          parser is not applied in between characters of the string. The <tt class="computeroutput"><span class="identifier">string</span></tt> generator has an assocaiated
          <a href="karma_basics.html#spirit.karma.reference.karma_basics.character_encoding_namespace">Character
          Encoding Namespace</a>. This is needed when doing basic operations such
          as forcing lower or upper case. Examples:
        </p>
<pre class="programlisting"><span class="identifier">string</span><span class="special">(</span><span class="string">"Hello"</span><span class="special">)</span>
<span class="identifier">string</span><span class="special">(</span><span class="identifier">L</span><span class="string">"Hello"</span><span class="special">)</span>
<span class="identifier">string</span><span class="special">(</span><span class="identifier">s</span><span class="special">)</span>         <span class="comment">// s is a std::string
</span></pre>
<p>
          <tt class="computeroutput"><span class="identifier">lit</span></tt>, like <tt class="computeroutput"><span class="identifier">string</span></tt>, also emits a string of characters.
          The main difference is that <tt class="computeroutput"><span class="identifier">lit</span></tt>
          does not consumes an attribute. A plain string like <tt class="computeroutput"><span class="string">"hello"</span></tt>
          or a <tt class="computeroutput"><span class="identifier">std</span><span class="special">::</span><span class="identifier">basic_string</span></tt> is equivalent to a <tt class="computeroutput"><span class="identifier">lit</span></tt>. Examples:
        </p>
<pre class="programlisting"><span class="string">"Hello"</span>
<span class="identifier">lit</span><span class="special">(</span><span class="string">"Hello"</span><span class="special">)</span>
<span class="identifier">lit</span><span class="special">(</span><span class="identifier">L</span><span class="string">"Hello"</span><span class="special">)</span>
<span class="identifier">lit</span><span class="special">(</span><span class="identifier">s</span><span class="special">)</span>            <span class="comment">// s is a std::string
</span></pre>
<a name="spirit.karma.reference.string.header"></a><h5>
<a name="id556619"></a>
          <a href="string.html#spirit.karma.reference.string.header">Header</a>
        </h5>
<pre class="programlisting"><span class="comment">// forwards to &lt;boost/spirit/home/karma/string/lit.hpp&gt;
</span><span class="preprocessor">#include</span> <span class="special">&lt;</span><span class="identifier">boost</span><span class="special">/</span><span class="identifier">spirit</span><span class="special">/</span><span class="identifier">include</span><span class="special">/</span><span class="identifier">karma_string</span><span class="special">.</span><span class="identifier">hpp</span><span class="special">&gt;</span>
</pre>
<p>
          Also, see <a href="../../structure/include.html" title="Include">Include Structure</a>.
        </p>
<a name="spirit.karma.reference.string.namespace"></a><h5>
<a name="id556732"></a>
          <a href="string.html#spirit.karma.reference.string.namespace">Namespace</a>
        </h5>
<div class="informaltable"><table class="table">
<colgroup><col></colgroup>
<thead><tr><th><p>
                  Name
                </p></th></tr></thead>
<tbody>
<tr><td><p>
                  <tt class="computeroutput"><span class="identifier">boost</span><span class="special">::</span><span class="identifier">spirit</span><span class="special">::</span><span class="identifier">lit</span> <span class="comment">// alias:
                  boost::spirit::karma::lit</span></tt>
                </p></td></tr>
<tr><td><p>
                  <tt class="computeroutput"><span class="identifier">ns</span><span class="special">::</span><span class="identifier">string</span></tt>
                </p></td></tr>
</tbody>
</table></div>
<p>
          In the table above, <tt class="computeroutput"><span class="identifier">ns</span></tt>
          is a <a href="karma_basics.html#spirit.karma.reference.karma_basics.character_encoding_namespace">Character
          Encoding Namespace</a> used by the corresponding string generator.
        </p>
<a name="spirit.karma.reference.string.model_of"></a><h5>
<a name="id556894"></a>
          <a href="string.html#spirit.karma.reference.string.model_of">Model of</a>
        </h5>
<div class="blockquote"><blockquote class="blockquote">
<p>
            </p>
<p>
              <a href="generator_concepts/primitivegenerator.html" title="PrimitiveGenerator"><tt class="computeroutput"><span class="identifier">PrimitiveGenerator</span></tt></a>
            </p>
<p>
          </p>
</blockquote></div>
<div class="variablelist">
<p class="title"><b>Notation</b></p>
<dl>
<dt><span class="term"><tt class="computeroutput"><span class="identifier">s</span></tt></span></dt>
<dd><p>
              Character-class specific string (See Character Class Types), or a
              <a href="karma_basics.html#spirit.karma.reference.karma_basics.lazy_argument">Lazy
              Argument</a> that evaluates to a character-class specific string
              value
            </p></dd>
<dt><span class="term"><tt class="computeroutput"><span class="identifier">S</span></tt></span></dt>
<dd><p>
              The type of a character-clas specific string <tt class="computeroutput"><span class="identifier">s</span></tt>.
            </p></dd>
<dt><span class="term"><tt class="computeroutput"><span class="identifier">ns</span></tt></span></dt>
<dd><p>
              A <a href="karma_basics.html#spirit.karma.reference.karma_basics.character_encoding_namespace">Character
              Encoding Namespace</a>.
            </p></dd>
</dl>
</div>
<a name="spirit.karma.reference.string.expression_semantics"></a><h5>
<a name="id557059"></a>
          <a href="string.html#spirit.karma.reference.string.expression_semantics">Expression
          Semantics</a>
        </h5>
<p>
          Semantics of an expression is defined only where it differs from, or is
          not defined in <a href="generator_concepts/primitivegenerator.html" title="PrimitiveGenerator"><tt class="computeroutput"><span class="identifier">PrimitiveGenerator</span></tt></a>.
        </p>
<div class="informaltable"><table class="table">
<colgroup>
<col>
<col>
</colgroup>
<thead><tr>
<th><p>
                  Expression
                </p></th>
<th><p>
                  Description
                </p></th>
</tr></thead>
<tbody>
<tr>
<td><p>
                  <tt class="computeroutput"><span class="identifier">s</span></tt>
                </p></td>
<td><p>
                  Generate the string literal <tt class="computeroutput"><span class="identifier">s</span></tt>.
                  This generator never fails (except if the underlying output stream
                  reports an error).
                </p></td>
</tr>
<tr>
<td><p>
                  <tt class="computeroutput"><span class="identifier">lit</span><span class="special">(</span><span class="identifier">s</span><span class="special">)</span></tt>
                </p></td>
<td><p>
                  Generate the string literal <tt class="computeroutput"><span class="identifier">s</span></tt>.
                  This generator never fails (except if the underlying output stream
                  reports an error).
                </p></td>
</tr>
<tr>
<td><p>
                  <tt class="computeroutput"><span class="identifier">ns</span><span class="special">::</span><span class="identifier">string</span></tt>
                </p></td>
<td><p>
                  Generate the string provided by a mandatory attribute interpreted
                  in the character set defined by <tt class="computeroutput"><span class="identifier">ns</span></tt>.
                  This generator never fails (except if the underlying output stream
                  reports an error).
                </p></td>
</tr>
<tr>
<td><p>
                  <tt class="computeroutput"><span class="identifier">ns</span><span class="special">::</span><span class="identifier">string</span><span class="special">(</span><span class="identifier">s</span><span class="special">)</span></tt>
                </p></td>
<td><p>
                  Generate the string <tt class="computeroutput"><span class="identifier">s</span></tt>
                  as provided by the immediate literal value the generator is initialized
                  from. If this generator has an associated attribute it succeeds
                  only as long as the attribute is equal to the immediate literal
                  (except if the underlying output stream reports an error). Otherwise
                  this generator fails and does not generate any output.
                </p></td>
</tr>
</tbody>
</table></div>
<div class="note"><table border="0" summary="Note">
<tr>
<td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="../../../images/note.png"></td>
<th align="left">Note</th>
</tr>
<tr><td colspan="2" align="left" valign="top"><p>
            The generators <tt class="computeroutput"><span class="identifier">lit</span><span class="special">(</span><span class="identifier">s</span><span class="special">)</span></tt>
            and <tt class="computeroutput"><span class="identifier">string</span><span class="special">(</span><span class="identifier">s</span><span class="special">)</span></tt>
            can be initialized either using a string literal value (i.e. <tt class="computeroutput"><span class="string">"abc"</span></tt>), or using a <tt class="computeroutput"><span class="identifier">std</span><span class="special">::</span><span class="identifier">basic_string</span><span class="special">&lt;</span><span class="identifier">char_type</span><span class="special">,</span>
            <span class="special">...&gt;</span></tt>, where <tt class="computeroutput"><span class="identifier">char_type</span></tt>
            is the required value type of the underlying character sequence.
          </p></td></tr>
</table></div>
<a name="spirit.karma.reference.string.attributes"></a><h5>
<a name="id557501"></a>
          <a href="string.html#spirit.karma.reference.string.attributes">Attributes</a>
        </h5>
<div class="informaltable"><table class="table">
<colgroup>
<col>
<col>
</colgroup>
<thead><tr>
<th><p>
                  Expression
                </p></th>
<th><p>
                  Attribute
                </p></th>
</tr></thead>
<tbody>
<tr>
<td><p>
                  <tt class="computeroutput"><span class="identifier">s</span></tt>
                </p></td>
<td><p>
                  <tt class="computeroutput"><span class="identifier">unused</span></tt>
                </p></td>
</tr>
<tr>
<td><p>
                  <tt class="computeroutput"><span class="identifier">lit</span><span class="special">(</span><span class="identifier">s</span><span class="special">)</span></tt>
                </p></td>
<td><p>
                  <tt class="computeroutput"><span class="identifier">unused</span></tt>
                </p></td>
</tr>
<tr>
<td><p>
                  <tt class="computeroutput"><span class="identifier">ns</span><span class="special">::</span><span class="identifier">string</span></tt>
                </p></td>
<td><p>
                  <tt class="computeroutput"><span class="identifier">S</span></tt>, attribute is
                  mandatory (otherwise compilation will fail)
                </p></td>
</tr>
<tr>
<td><p>
                  <tt class="computeroutput"><span class="identifier">ns</span><span class="special">::</span><span class="identifier">string</span><span class="special">(</span><span class="identifier">s</span><span class="special">)</span></tt>
                </p></td>
<td><p>
                  <tt class="computeroutput"><span class="identifier">S</span></tt>, attribute is
                  optional, if it is supplied, the generator compares the attribute
                  with <tt class="computeroutput"><span class="identifier">s</span></tt> and succeeds
                  only if both are equal, failing otherwise
                </p></td>
</tr>
</tbody>
</table></div>
<a name="spirit.karma.reference.string.complexity"></a><h5>
<a name="id557786"></a>
          <a href="string.html#spirit.karma.reference.string.complexity">Complexity</a>
        </h5>
<div class="blockquote"><blockquote class="blockquote">
<p>
            </p>
<p>
              O(N), where N is the number of characters emitted by the string generator
            </p>
<p>
          </p>
</blockquote></div>
<a name="spirit.karma.reference.string.example"></a><h5>
<a name="id557822"></a>
          <a href="string.html#spirit.karma.reference.string.example">Example</a>
        </h5>
<p>
          Some includes:
        </p>
<p>
          </p>
<p>
            
</p>
<pre class="programlisting"><span class="preprocessor">#include</span> <span class="special">&lt;</span><span class="identifier">boost</span><span class="special">/</span><span class="identifier">spirit</span><span class="special">/</span><span class="identifier">include</span><span class="special">/</span><span class="identifier">karma</span><span class="special">.</span><span class="identifier">hpp</span><span class="special">&gt;</span>
<span class="preprocessor">#include</span> <span class="special">&lt;</span><span class="identifier">boost</span><span class="special">/</span><span class="identifier">spirit</span><span class="special">/</span><span class="identifier">include</span><span class="special">/</span><span class="identifier">phoenix_core</span><span class="special">.</span><span class="identifier">hpp</span><span class="special">&gt;</span>
<span class="preprocessor">#include</span> <span class="special">&lt;</span><span class="identifier">boost</span><span class="special">/</span><span class="identifier">spirit</span><span class="special">/</span><span class="identifier">include</span><span class="special">/</span><span class="identifier">phoenix_operator</span><span class="special">.</span><span class="identifier">hpp</span><span class="special">&gt;</span>
<span class="preprocessor">#include</span> <span class="special">&lt;</span><span class="identifier">boost</span><span class="special">/</span><span class="identifier">fusion</span><span class="special">/</span><span class="identifier">include</span><span class="special">/</span><span class="identifier">std_pair</span><span class="special">.</span><span class="identifier">hpp</span><span class="special">&gt;</span>
<span class="preprocessor">#include</span> <span class="special">&lt;</span><span class="identifier">iostream</span><span class="special">&gt;</span>
<span class="preprocessor">#include</span> <span class="special">&lt;</span><span class="identifier">string</span><span class="special">&gt;</span>
</pre>
<p>
          </p>
<p>
        </p>
<p>
          All code snippets below use these common test functions:
        </p>
<p>
          </p>
<p>
            
</p>
<pre class="programlisting"><span class="keyword">template</span> <span class="special">&lt;</span><span class="keyword">typename</span> <span class="identifier">G</span><span class="special">&gt;</span>
<span class="keyword">void</span> <span class="identifier">test_generator</span><span class="special">(</span><span class="keyword">char</span> <span class="keyword">const</span><span class="special">*</span> <span class="identifier">expected</span><span class="special">,</span> <span class="identifier">G</span> <span class="keyword">const</span><span class="special">&amp;</span> <span class="identifier">g</span><span class="special">)</span>
<span class="special">{</span>
    <span class="identifier">std</span><span class="special">::</span><span class="identifier">string</span> <span class="identifier">s</span><span class="special">;</span>
    <span class="identifier">std</span><span class="special">::</span><span class="identifier">back_insert_iterator</span><span class="special">&lt;</span><span class="identifier">std</span><span class="special">::</span><span class="identifier">string</span><span class="special">&gt;</span> <span class="identifier">out</span><span class="special">(</span><span class="identifier">s</span><span class="special">);</span>
    <span class="keyword">if</span> <span class="special">(</span><span class="identifier">boost</span><span class="special">::</span><span class="identifier">spirit</span><span class="special">::</span><span class="identifier">karma</span><span class="special">::</span><span class="identifier">generate</span><span class="special">(</span><span class="identifier">out</span><span class="special">,</span> <span class="identifier">g</span><span class="special">)</span> <span class="special">&amp;&amp;</span> <span class="identifier">str</span> <span class="special">==</span> <span class="identifier">expected</span><span class="special">)</span>
        <span class="identifier">std</span><span class="special">::</span><span class="identifier">cout</span> <span class="special">&lt;&lt;</span> <span class="string">"ok"</span> <span class="special">&lt;&lt;</span> <span class="identifier">std</span><span class="special">::</span><span class="identifier">endl</span><span class="special">;</span>
    <span class="keyword">else</span>
        <span class="identifier">std</span><span class="special">::</span><span class="identifier">cout</span> <span class="special">&lt;&lt;</span> <span class="string">"fail"</span> <span class="special">&lt;&lt;</span> <span class="identifier">std</span><span class="special">::</span><span class="identifier">endl</span><span class="special">;</span>
<span class="special">}</span>
</pre>
<p>
          </p>
<p>
          </p>
<p>
            
</p>
<pre class="programlisting"><span class="keyword">template</span> <span class="special">&lt;</span><span class="keyword">typename</span> <span class="identifier">G</span><span class="special">,</span> <span class="keyword">typename</span> <span class="identifier">T</span><span class="special">&gt;</span>
<span class="keyword">void</span> <span class="identifier">test_generator_attr</span><span class="special">(</span><span class="keyword">char</span> <span class="keyword">const</span><span class="special">*</span> <span class="identifier">expected</span><span class="special">,</span> <span class="identifier">G</span> <span class="keyword">const</span><span class="special">&amp;</span> <span class="identifier">g</span><span class="special">,</span> <span class="identifier">T</span> <span class="keyword">const</span><span class="special">&amp;</span> <span class="identifier">attr</span><span class="special">)</span>
<span class="special">{</span>
    <span class="identifier">std</span><span class="special">::</span><span class="identifier">string</span> <span class="identifier">s</span><span class="special">;</span>
    <span class="identifier">std</span><span class="special">::</span><span class="identifier">back_insert_iterator</span><span class="special">&lt;</span><span class="identifier">std</span><span class="special">::</span><span class="identifier">string</span><span class="special">&gt;</span> <span class="identifier">out</span><span class="special">(</span><span class="identifier">s</span><span class="special">);</span>
    <span class="keyword">if</span> <span class="special">(</span><span class="identifier">boost</span><span class="special">::</span><span class="identifier">spirit</span><span class="special">::</span><span class="identifier">karma</span><span class="special">::</span><span class="identifier">generate</span><span class="special">(</span><span class="identifier">out</span><span class="special">,</span> <span class="identifier">g</span><span class="special">,</span> <span class="identifier">attr</span><span class="special">)</span> <span class="special">&amp;&amp;</span> <span class="identifier">str</span> <span class="special">==</span> <span class="identifier">expected</span><span class="special">)</span>
        <span class="identifier">std</span><span class="special">::</span><span class="identifier">cout</span> <span class="special">&lt;&lt;</span> <span class="string">"ok"</span> <span class="special">&lt;&lt;</span> <span class="identifier">std</span><span class="special">::</span><span class="identifier">endl</span><span class="special">;</span>
    <span class="keyword">else</span>
        <span class="identifier">std</span><span class="special">::</span><span class="identifier">cout</span> <span class="special">&lt;&lt;</span> <span class="string">"fail"</span> <span class="special">&lt;&lt;</span> <span class="identifier">std</span><span class="special">::</span><span class="identifier">endl</span><span class="special">;</span>
<span class="special">}</span>
</pre>
<p>
          </p>
<p>
        </p>
<p>
          Some using declarations:
        </p>
<p>
          </p>
<p>
            
</p>
<pre class="programlisting"><span class="keyword">using</span> <span class="identifier">boost</span><span class="special">::</span><span class="identifier">spirit</span><span class="special">::</span><span class="identifier">karma</span><span class="special">::</span><span class="identifier">generate</span><span class="special">;</span>
<span class="keyword">using</span> <span class="identifier">boost</span><span class="special">::</span><span class="identifier">spirit</span><span class="special">::</span><span class="identifier">karma</span><span class="special">::</span><span class="identifier">lit</span><span class="special">;</span>
<span class="keyword">using</span> <span class="identifier">boost</span><span class="special">::</span><span class="identifier">spirit</span><span class="special">::</span><span class="identifier">ascii</span><span class="special">::</span><span class="identifier">string</span><span class="special">;</span>
</pre>
<p>
          </p>
<p>
        </p>
<p>
          Basic usage of <tt class="computeroutput"><span class="identifier">string</span></tt> generators:
        </p>
<p>
          </p>
<p>
            
</p>
<pre class="programlisting"><span class="identifier">test_generator</span><span class="special">(</span><span class="string">"abc"</span><span class="special">,</span> <span class="string">"abc"</span><span class="special">);</span>
<span class="identifier">test_generator</span><span class="special">(</span><span class="string">"abc"</span><span class="special">,</span> <span class="identifier">lit</span><span class="special">(</span><span class="string">"abc"</span><span class="special">));</span>
<span class="identifier">test_generator</span><span class="special">(</span><span class="string">"abc"</span><span class="special">,</span> <span class="identifier">lit</span><span class="special">(</span><span class="identifier">std</span><span class="special">::</span><span class="identifier">string</span><span class="special">(</span><span class="string">"abc"</span><span class="special">)));</span>

<span class="identifier">test_generator_attr</span><span class="special">(</span><span class="string">"abc"</span><span class="special">,</span> <span class="identifier">string</span><span class="special">,</span> <span class="string">"abc"</span><span class="special">);</span>
<span class="identifier">test_generator</span><span class="special">(</span><span class="string">"abc"</span><span class="special">,</span> <span class="identifier">string</span><span class="special">(</span><span class="string">"abc"</span><span class="special">));</span>
<span class="identifier">test_generator</span><span class="special">(</span><span class="string">"abc"</span><span class="special">,</span> <span class="identifier">string</span><span class="special">(</span><span class="identifier">std</span><span class="special">::</span><span class="identifier">string</span><span class="special">(</span><span class="string">"abc"</span><span class="special">)));</span>

<span class="identifier">test_generator_attr</span><span class="special">(</span><span class="string">"abc"</span><span class="special">,</span> <span class="identifier">string</span><span class="special">(</span><span class="string">"abc"</span><span class="special">),</span> <span class="string">"abc"</span><span class="special">);</span>
<span class="identifier">test_generator_attr</span><span class="special">(</span><span class="string">""</span><span class="special">,</span> <span class="identifier">string</span><span class="special">(</span><span class="string">"abc"</span><span class="special">),</span> <span class="string">"cba"</span><span class="special">);</span>     <span class="comment">// fails (as "abc" != "cba")
</span></pre>
<p>
          </p>
<p>
        </p>
</div>
<table xmlns:rev="http://www.cs.rpi.edu/~gregod/boost/tools/doc/revision" width="100%"><tr>
<td align="left"></td>
<td align="right"><div class="copyright-footer">Copyright © 2001-2009 Joel
      de Guzman, Hartmut Kaiser<p>
        Distributed under the Boost Software License, Version 1.0. (See accompanying
        file LICENSE_1_0.txt or copy at <a href="http://www.boost.org/LICENSE_1_0.txt" target="_top">http://www.boost.org/LICENSE_1_0.txt</a>)
      </p>
</div></td>
</tr></table>
<hr>
<div class="spirit-nav">
<a accesskey="p" href="char/char_class.html"><img src="../../../../../../../doc/html/images/prev.png" alt="Prev"></a><a accesskey="u" href="../reference.html"><img src="../../../../../../../doc/html/images/up.png" alt="Up"></a><a accesskey="h" href="../../../index.html"><img src="../../../../../../../doc/html/images/home.png" alt="Home"></a><a accesskey="n" href="numeric.html"><img src="../../../../../../../doc/html/images/next.png" alt="Next"></a>
</div>
</body>
</html>
